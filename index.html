<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flower Shop</title>
    <link rel="stylesheet" href="./css/index.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.2/sweetalert.min.js"></script>
</head>
<body>
    <div class="top-wrapper" id="top">
        <div class="container">
            <h1>One Special To Your Daily Life...</h1>
            <p>On an ordinary day</p>
            <p>A Special Day</p>
            <p>Why not send flowers?</p>
        </div>
    </div>
    <header>
        <div class="head-container">
            <nav>
                <ul>
                    <li><a href="#top">Top</a></li>
                    <li><a href="#birthday">Birthday</a></li>
                    <li><a href="#anniversary">Anniversary</a></li>
                    <li><a href="#wedding">Wedding</a></li>
                    <li><a href="#daily">Daily</a></li>
                    <li><a href="#cart">Cart</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Birthday -->
    <div class="flower-wrapper">
        <h2 class="heading" id="birthday" >Birthday</h2>
        <ul>
            <li>
                <div class="flower-img">
                    <img class="flower-pic" src="./img/birthday-1.jpg" alt="birthday-1" />
                    <div class="hover-mask">
                        <p name="flower-name">Birthday Flower 1</p>
                        <button class="cart-btn1">Add Cart</button>
                    </div>
                </div>
            </li>
            <li>
                <div class="flower-img">
                    <img class="flower-pic" src="./img/birthday-2.jpg" alt="birthday-1" />
                    <div class="hover-mask">
                        <p name="flower-name">Birthday Flower 2</p>
                        <button class="cart-btn1">Add Cart</button>
                    </div>
                </div>
            </li>
            <li>
                <div class="flower-img">
                    <img class="flower-pic" src="./img/birthday-3.jpg" alt="birthday-1" />
                    <div class="hover-mask">
                        <p name="flower-name">Birthday Flower 3</p>
                        <button class="cart-btn1">Add Cart</button>
                    </div>
                </div>
            </li>
            <li>
                <div class="flower-img">
                    <img class="flower-pic" src="./img/birthday-4.jpg" alt="birthday-1" />
                    <div class="hover-mask">
                        <p name="flower-name">Birthday Flower 4</p>
                        <button class="cart-btn1">Add Cart</button>
                    </div>
                </div>
            </li>
        </ul>
    </div>

    <!-- Anniversary -->
    <div class="flower-wrapper">
        <h2 class="heading" id="anniversary" >Anniversary</h2>
        <ul>
            <li>
                <div class="flower-img">
                    <img class="flower-pic" src="./img/anniversary-1.jpg" alt="anniversary-1" />
                    <div class="hover-mask">
                        <p name="flower-name">Anniversary Flower 1</p>
                        <button class="cart-btn1">Add Cart</button>
                    </div>
                </div>
            </li>
            <li>
                <div class="flower-img">
                    <img class="flower-pic" src="./img/anniversary-2.jpg" alt="anniversary-2" />
                    <div class="hover-mask">
                        <p name="flower-name">Anniversary Flower 2</p>
                        <button class="cart-btn1">Add Cart</button>
                    </div>
                </div>
            </li>
            <li>
                <div class="flower-img">
                    <img class="flower-pic" src="./img/anniversary-3.jpg" alt="anniversary-3" />
                    <div class="hover-mask">
                        <p name="flower-name">Anniversary Flower 3</p>
                        <button class="cart-btn1">Add Cart</button>
                    </div>
                </div>
            </li>
            <li>
                <div class="flower-img">
                    <img class="flower-pic" src="./img/anniversary-4.jpg" alt="anniversary-4" />
                    <div class="hover-mask">
                        <p name="flower-name">Anniversary Flower 4</p>
                        <button class="cart-btn1">Add Cart</button>
                    </div>
                </div>
            </li>
        </ul>
    </div>

    <!-- Wedding -->
    <div class="flower-wrapper">
        <h2 class="heading" id="wedding" >Wedding</h2>
        <ul>
            <li>
                <div class="flower-img">
                    <img class="flower-pic" src="./img/wedding-1.jpg" alt="wedding-1" />
                    <div class="hover-mask">
                        <p name="flower-name">Wedding Flower 1</p>
                        <button class="cart-btn1">Add Cart</button>
                    </div>
                </div>
            </li>
            <li>
                <div class="flower-img">
                    <img class="flower-pic" src="./img/wedding-2.jpg" alt="wedding-2" />
                    <div class="hover-mask">
                        <p name="flower-name">Wedding Flower 2</p>
                        <button class="cart-btn1">Add Cart</button>
                    </div>
                </div>
            </li>
            <li>
                <div class="flower-img">
                    <img class="flower-pic" src="./img/wedding-3.jpg" alt="wedding-3" />
                    <div class="hover-mask">
                        <p name="flower-name">Wedding Flower 3</p>
                        <button class="cart-btn1">Add Cart</button>
                    </div>
                </div>
            </li>
            <li>
                <div class="flower-img">
                    <img class="flower-pic" src="./img/wedding-4.jpg" alt="wedding-4" />
                    <div class="hover-mask">
                        <p name="flower-name">Wedding Flower 4</p>
                        <button class="cart-btn1">Add Cart</button>
                    </div>
                </div>
            </li>
        </ul>
    </div>

    <!-- Daily -->
    <div class="flower-wrapper">
        <h2 class="heading" id="daily" >Daily</h2>
        <ul>
            <li>
                <div class="flower-img">
                    <img class="flower-pic" src="./img/daily-1.jpg" alt="daily-1" />
                    <div class="hover-mask">
                        <p name="flower-name">Daily Flower 1</p>
                        <button class="cart-btn1">Add Cart</button>
                    </div>
                </div>
            </li>
            <li>
                <div class="flower-img">
                    <img class="flower-pic" src="./img/daily-2.jpg" alt="daily-2" />
                    <div class="hover-mask">
                        <p name="flower-name">Daily Flower 2</p>
                        <button class="cart-btn1">Add Cart</button>
                    </div>
                </div>
            </li>
            <li>
                <div class="flower-img">
                    <img class="flower-pic" src="./img/daily-3.jpg" alt="daily-3" />
                    <div class="hover-mask">
                        <p name="flower-name">Daily Flower 3</p>
                        <button class="cart-btn1">Add Cart</button>
                    </div>
                </div>
            </li>
            <li>
                <div class="flower-img">
                    <img class="flower-pic" src="./img/daily-4.jpg" alt="daily-4" />
                    <div class="hover-mask">
                        <p name="flower-name">Daily Flower 4</p>
                        <button class="cart-btn1">Add Cart</button>
                    </div>
                </div>
            </li>
        </ul>
    </div>

    <!-- Check Cart -->
    <div class="check-wrapper">
        <h2 class="heading" id="cart">Cart</h2>
        <div class="l-accordion">
            <input id="ac1" type="checkbox">
            <label for="ac1" class="l-accordion-switch check-label">Click And Check</label>
            <div class="l-accordion-inside">
                <div class="cart-box pd25154">
                    <span id="parent"></span>
                </div>
                <div class="cart-box pd0424">
                    <p id="total">Total</p>
                    <p id="totalCount">0</p>
                </div>
                <div class="cart-box pd2424">
                    <div>
                        <p>Do you want us to send a message?
                            <span class="ac-child">
                                <input type="radio" class="radio-label" id="yesMsg" name="msg" value="YES" onchange="checkMessage()">Yes
                                <input type="radio" class="radio-label" id="noMsg" name="msg" value="NO" onchange="checkMessage()">No
                            </span>
                        </p>
                        <textarea name="orderMessage" id="orderMessage" cols="70" rows="10" placeholder="write message" readonly></textarea>
                        <button class="cart-btn2" id="order" onclick="order()">Let's Order</button>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- Contact -->
    <div class="contact-wrapper">
        <h2 class="heading" id="contact" >Contact</h2>
            <div class="contact-container">
                <div class="child-box">
                    <input type="text" id="name" class="textContact" placeholder="Your Name">
                </div>
                <div class="child-box">
                    <input type="mail" id="mail" class="textContact" placeholder="Your Email">
                </div>
                <div class="child-box">
                    <textarea name="sendMessage" id="sendMessage"  class="yourMessage" placeholder="Your Message" cols="30" rows="10"></textarea>
                </div>
                <div class="child-box">
                    <button class="contact-btn" onclick="send()">Send</button>
                </div>
            <div class="child-box">
                <div class="child-box-left">
                    <img class="icon-child" src="./img/home.png" alt="home">
                        <p class="p34">Address <br>
                            ****** *********** ** *****</p>
                        
                    <img class="icon-child" src="./img/phone.png" alt="phone">
                    <p class="p18">Phone <br>
                        123 456 7890</p>
                    <img class="icon-child" src="./img/mail.png" alt="mail">
                    <p class="p18">Mail <br>
                        abc@def.com</p>
                </div>
            </div>
        </div>       
    </div>
    <footer>
        <div class="container">
            <img src="./img/icon.png">
            <p>One special to your daily life.</p>
        </div>
    </footer>

    <!-- hidden value-->
    <input type="hidden" name="count" value= "0">
</body>
<script type="text/javascript" th:inline="javascript">

    let buttonList = document.querySelectorAll(".cart-btn1");
    let list = document.getElementById('parent');
    let count = Number(document.getElementsByName("count")[0].value);
    const addMsg = "Add Cart";
    const removeMsg = "Remove From Cart";

    //-----------------------
    //radio button action
    //-----------------------
    function checkMessage(){
        const messageArea = document.getElementById('orderMessage');
        let message = document.getElementsByName("msg");
        if(message[0].checked)
            messageArea.readOnly = false;
        else
            messageArea.readOnly = true;
    }


    //-----------------------
    // click button action
    //-----------------------
    buttonList.forEach(function(i, index){
        i.addEventListener("click", function(e){
            if(e.target.innerHTML == removeMsg){
                e.target.innerHTML = addMsg;
                // remove an order in your cart
                removeOrder(index);
                count =  count - 1;
            }else{
                if(count > 4){
                    //alert
                    swal('You can order up to 5.');
                }else{
                    if(e.target.innerHTML == addMsg){
                        e.target.innerHTML = removeMsg;
                        // add an order in your cart
                        addOrder(index);
                        count = count + 1;
                    }else{
                        e.target.innerHTML = addMsg;
                        // remove an order in your cart
                        removeOrder(index);
                        count =  count - 1;
                    }
                }
            }
            // change a count number
            document.getElementsByName("count")[0].value = String(count);
            document.getElementById("totalCount").innerHTML = String(count);
        })
    })


    //----------------------------
    // add an order in your cart
    //----------------------------
    function addOrder(no){
        // create new order
        let newTxt = document.createTextNode(document.getElementsByName('flower-name')[no].innerHTML);
        // set p element
        let newElement = document.createElement("p");
        let newContent = document.createTextNode(newTxt.textContent);
        newElement.appendChild(newContent);
        //set an id in p element
        newElement.setAttribute("id", "child" + no)
        newElement.setAttribute("class", "child")
        list.appendChild(newElement);
    }


    //--------------------------------
    // remove an order in your cart
    //--------------------------------
    function removeOrder(no){
        const element = document.getElementById("child" + no); 
        element.remove();
    }


    //-----------
    //order
    //-----------
    function order(){
        if (count > 0) {
            var options = {
                text: 'would you like to order?',
                buttons: {
                    cancel: 'Cancel',
                    ok: 'Order'
                }
            };

            swal(options).then(function(value){
                if(value){
                    swal('Ordered!');
                    let element = document.getElementById('parent');
                    let elements = document.querySelectorAll(".child");

                    for(var i = 0; i < elements.length; i++){
                        elements[i].remove();
                        //get id element
                        let elementId = elements[i].getAttribute('id');
                        let idNo = elementId.slice(5);
                        //change button name
                        document.getElementsByClassName("cart-btn1")[idNo].innerHTML = addMsg;
                    }
                    // clear total count
                    document.getElementById("totalCount").innerHTML = '0';
                    // clear radio buttons
                    document.getElementsByName('msg')[0].checked = false;
                    document.getElementsByName('msg')[1].checked = false;
                    
                    // clear order message
                    document.getElementById('orderMessage').value = '';
                    count = 0;
                }
            });
        } else {
            //alert
            swal('There are no products in your cart.');
        }
    }

    
    //----------
    //contact
    //----------
    function send(){
        const name = document.getElementById('name').value;
        const mail = document.getElementById('mail').value;
        const sendMessage = document.getElementById('sendMessage').value;

        if (name === "" || mail === "" || sendMessage === "") {
            //alert
            swal('Please fill in all form.');
        } else {
            var options = {
                text: 'would you like to send?',
                buttons: {
                    cancel: 'Cancel',
                    ok: 'Yes'
                }
            };

            swal(options).then(function(value){
                if(value){
                    //alert
                    swal('Sended!');
                    // clear contact form
                    document.getElementById('name').value = '';
                    document.getElementById('mail').value = '';
                    document.getElementById('sendMessage').value = '';
                }
            });
        }
    }
</script>
</html>
